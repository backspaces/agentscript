<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RGBDataSet.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RGBDataSet.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as util from './utils.js'
import DataSet from './DataSet.js'

// See TileData.js for several rgbToData functions
// as well as their use with several tile servers

/**
 * Class for converting an image to a DataSet.
 *
 * @class
 * @extends DataSet
 */
class RGBDataSet extends DataSet {
    /**
     * Convert an r,g,b triple into an integer
     * @param {number} r Red value, integer in [0,255]
     * @param {number} g Green value, integer in [0,255]
     * @param {number} b Blue value, integer in [0,255]
     * @returns {number} A 24 bit integer
     */
    static rgbToInt24(r, g, b) {
        return r * 256 * 256 + g * 256 + b
    }

    /**
     * As above with min/scale
     * @param {number} min The min return value
     * @param {number} scale The scale factor
     * @returns {number} A 24 bit integer
     */
    static rgbScaleFunction(min, scale) {
        return (r, g, b) => min + rgbToInt24(r, g, b) * scale
        // return (r, g, b) => min + (r * 256 * 256 + g * 256 + b) * scale
    }

    // Constructor args: (img, rgbToData, ArrayType)
    // where rgbToData(r,g,b) returns a number for the dataset.
    /**
     * Create a {@link DataSet} from image pixel data
     * @param {Image} img Any "imagable" object that can be drawn to a canvas
     * @param {function} rgbToData Fnction converting 3 r,g,b bytes to a number
     * @param {constructor} ArrayType A TypedArray or Array. (default Float32)
     */
    constructor(
        img,
        rgbToData = RGBDataSet.rgbToInt24,
        ArrayType = Float32Array
    ) {
        // const [width, height] = util.imageSize(img)
        const { width, height } = img
        super(width, height, new ArrayType(width * height))
        // super(img.width, img.height, new ArrayType(img.width * img.height))

        // Not used or defined anywhere!
        // if (Array.isArray(rgbToData))
        //     rgbToData = RGBDataSet.newRgbDataFunction(rgbToData)

        // const ctx = util.createCtx(img.width, img.height)
        // util.fillCtxWithImage(ctx, img)
        const ctx = util.imageToCtx(img)
        const imgData = util.ctxImageData(ctx)

        const convertedData = this.data
        for (var i = 0; i &lt; convertedData.length; i++) {
            const r = imgData.data[4 * i]
            const g = imgData.data[4 * i + 1]
            const b = imgData.data[4 * i + 2]
            convertedData[i] = rgbToData(r, g, b)
        }
    }
}

export default RGBDataSet
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-src_geojson.html">src/geojson</a></li><li><a href="module-src_gis.html">src/gis</a></li><li><a href="module-src_utils.html">src/utils</a></li></ul><h3>Namespaces</h3><ul><li><a href="Color.html">Color</a></li><li><a href="ColorMap.html">ColorMap</a></li></ul><h3>Classes</h3><ul><li><a href="AgentArray.html">AgentArray</a></li><li><a href="AgentList.html">AgentList</a></li><li><a href="AgentSet.html">AgentSet</a></li><li><a href="Animator.html">Animator</a></li><li><a href="DataSet.html">DataSet</a></li><li><a href="GUI.html">GUI</a></li><li><a href="GeoDataSet.html">GeoDataSet</a></li><li><a href="Keyboard.html">Keyboard</a></li><li><a href="Link.html">Link</a></li><li><a href="Links.html">Links</a></li><li><a href="Model.html">Model</a></li><li><a href="Model3D.html">Model3D</a></li><li><a href="Mouse.html">Mouse</a></li><li><a href="Patch.html">Patch</a></li><li><a href="Patches.html">Patches</a></li><li><a href="RGBDataSet.html">RGBDataSet</a></li><li><a href="ThreeDraw.html">ThreeDraw</a></li><li><a href="Turtle.html">Turtle</a></li><li><a href="Turtle3D.html">Turtle3D</a></li><li><a href="Turtles.html">Turtles</a></li><li><a href="TwoDraw.html">TwoDraw</a></li><li><a href="World.html">World</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-GettingStarted.html">GettingStarted</a></li><li><a href="tutorial-JavaScript.html">JavaScript</a></li><li><a href="tutorial-Snippets.html">Snippets</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Nov 16 2023 11:00:09 GMT-0700 (Mountain Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
